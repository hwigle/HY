<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="BoardSpace">

	<typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap" />
	<typeAlias alias="boardVO" type="main.service.BoardVO" />
	
	<insert id="boardDAO.insertBoard">
	insert into board(unq,title,pass,name,content,hits,rdate)
	values(
			board_seq.nextval
			, #title#
			, #pass#
			, #name#
			, #content#
			,0
			,sysdate)
	
	</insert>
	
	<select id="boardDAO.selectBoardList" resultClass="egovMap">
	<![CDATA[
	select b.* 
	from(
	     select rownum rn
	           , a.* 
	     from(
	         select unq
	           , title
	           , name
	           , hits
	           , to_char(rdate, 'yyyy-mm-dd') rdate
	         from   board    
	         order by unq desc) a) b
	where rn >= #startIndex# and rn <= #endIndex#
	]]>
	</select>
	
	<select id="boardDAO.selectBoardTotal" resultClass="java.lang.Integer">
	select count(*) total from board
	</select>
	
</sqlMap>